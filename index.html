<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Playgrid — HTML5 Games</title>
  <meta name="color-scheme" content="dark light" />
  <style>
    :root{
      --bg:#0b0c0f;
      --panel:#0f1116;
      --muted:#8b94a7;
      --text:#e8ecf1;
      --accent:#7aa2ff;
      --border:#1b1f2a;
      --tag-bg:#111826;
      --tag-text:#bcd1ff;
      --new:#22c55e;
      --popular:#f59e0b;
      --danger:#ef4444;
      --radius:18px;
      --gap:16px;
      --shadow:0 1px 0 rgba(255,255,255,0.03) inset, 0 8px 30px rgba(0,0,0,0.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font:15px/1.5 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Inter, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:radial-gradient(1200px 800px at 100% -20%, #0d1224 0%, transparent 60%),var(--bg);
      letter-spacing:.2px;
    }
    header{
      position:sticky; top:0; z-index:40;
      backdrop-filter:saturate(140%) blur(8px);
      background:linear-gradient(to bottom, rgba(9,11,16,.9), rgba(9,11,16,.6));
      border-bottom:1px solid var(--border);
    }
    .container{max-width:1200px; margin:0 auto; padding:18px 16px;}
    .brand{
      display:flex; align-items:center; gap:12px; font-weight:800; letter-spacing:.3px;
      cursor:pointer; text-decoration:none; color:var(--text);
    }
    .brand svg{width:38px; height:38px; flex:0 0 38px}
    .brand .logo-text{font-size:18px; display:flex; flex-direction:column; line-height:1}
    .brand .logo-text .title{font-weight:900; font-size:18px}
    .brand .logo-text .subtitle{font-size:11px; color:var(--muted); margin-top:2px}
    .toprow{display:flex; gap:14px; align-items:center; justify-content:space-between}
    .search{
      flex:1; display:flex; align-items:center; gap:10px;
      background:linear-gradient(180deg, #0c0f16, #0b0d13);
      border:1px solid var(--border);
      border-radius:14px; padding:10px 12px;
      box-shadow:var(--shadow);
    }
    .search input{
      flex:1; background:transparent; outline:none; border:0; color:var(--text); font-size:14px;
    }
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 10px; border:1px solid var(--border);
      border-radius:999px; background:linear-gradient(180deg, #0d1118, #0c0f15);
      color:var(--muted); cursor:pointer; user-select:none;
      transition:transform .12s ease, border-color .2s ease, color .2s ease;
    }
    .chip:hover{transform:translateY(-1px); border-color:#273044; color:#c5d1ea}
    main{padding:24px 16px}
    .grid{
      display:grid; grid-template-columns:repeat(12,1fr); gap:var(--gap);
      max-width:1200px; margin:0 auto;
    }
    .cards{
      grid-column:1/-1;
      display:grid; grid-template-columns:repeat(auto-fill, minmax(240px,1fr)); gap:var(--gap);
    }
    .card{
      position:relative; overflow:hidden; border:1px solid var(--border);
      border-radius:var(--radius);
      background:linear-gradient(180deg,#10141c 0%, #0e1219 100%);
      box-shadow:var(--shadow);
      cursor:pointer; isolation:isolate;
      transition:transform .18s ease, border-color .2s ease, box-shadow .2s ease;
    }
    .card:hover{transform:translateY(-2px); border-color:#293247; box-shadow:0 12px 40px rgba(0,0,0,.5)}
    .thumb{
      aspect-ratio:16/9; display:grid; place-items:center;
      background:
        radial-gradient(200px 120px at 20% 20%, rgba(90,120,255,.18), transparent 60%),
        radial-gradient(300px 180px at 100% 0%, rgba(255,110,120,.12), transparent 60%),
        #0e1321;
    }
    .thumb img{width:100%; height:100%; object-fit:cover; display:block}
    .thumb canvas{width:100%; height:100%; display:block}
    .meta{padding:12px; display:flex; align-items:center; justify-content:space-between; gap:10px}
    .tags{display:flex; gap:8px; flex-wrap:wrap}
    .tag{
      font-size:12px; padding:5px 8px; border-radius:999px;
      background:var(--tag-bg); color:var(--tag-text);
      border:1px solid #1a2234;
    }
    .overlay{
      position:absolute; inset:auto 0 0 0; height:48px;
      background:linear-gradient(180deg, transparent 0%, rgba(10,13,20,.8) 30%, rgba(10,13,20,.95) 100%);
      display:flex; align-items:center; padding:10px 12px; gap:10px; transform:translateY(100%);
      transition:transform .22s ease;
      border-top:1px solid var(--border);
    }
    .card:hover .overlay{transform:translateY(0)}
    .title{font-weight:700; font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; color:#dfe7ff}
    .outline-new{box-shadow:0 0 0 1px var(--new) inset, 0 0 24px rgba(34,197,94,.25)}
    .outline-popular{box-shadow:0 0 0 1px var(--popular) inset, 0 0 24px rgba(245,158,11,.22)}
    .badge{
      position:absolute; top:10px; left:10px; z-index:3;
      padding:4px 8px; border-radius:999px; font-size:11px; font-weight:700;
      background:#0f1627; border:1px solid var(--border); color:var(--text);
      text-transform:uppercase; letter-spacing:.4px; opacity:.95;
    }
    .outline-new .badge{border-color:rgba(34,197,94,.45); color:#c9f3d8}
    .outline-popular .badge{border-color:rgba(245,158,11,.45); color:#ffe6bf}
    .hidden{display:none !important}
    .panel{
      border:1px solid var(--border); border-radius:var(--radius);
      background:linear-gradient(180deg,#0f131c,#0d1118);
      box-shadow:var(--shadow);
    }
    .detail{
      max-width:1200px; margin:0 auto; display:grid; grid-template-columns:minmax(0,1fr) 360px; gap:20px;
    }
    .player{
      position:relative; aspect-ratio:16/9; border-bottom:1px solid var(--border); border-top-left-radius:var(--radius);
      border-top-right-radius:var(--radius); overflow:hidden; background:#0a0e16;
    }
    .player iframe, .player .fake{
      width:100%; height:100%; border:0; display:block;
    }
    .bg-video{
      position:absolute; inset:0; width:100%; height:100%; object-fit:cover; transform:scale(1.06); filter:blur(15px) brightness(.5); z-index:0;
    }
    .loading-overlay{
      position:absolute; inset:0; display:flex; align-items:center; justify-content:center; z-index:2;
    }
    .loading-card{
      width:min(720px,90%); max-width:900px; border-radius:14px; padding:22px; backdrop-filter:blur(6px) saturate(120%);
      background:linear-gradient(180deg, rgba(8,10,14,.55), rgba(8,10,14,.65)); border:1px solid rgba(255,255,255,.04);
      display:flex; gap:20px; align-items:center; box-shadow:0 6px 30px rgba(0,0,0,.6);
    }
    .loading-thumb{width:140px; height:78px; border-radius:10px; overflow:hidden; flex:0 0 140px; display:block}
    .loading-thumb img{width:100%; height:100%; object-fit:cover; display:block}
    .loading-meta{flex:1; min-width:0}
    .loading-title{font-weight:800; font-size:20px; margin-bottom:8px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
    .progress-wrap{height:8px; background:rgba(255,255,255,.04); border-radius:999px; overflow:hidden}
    .progress{height:100%; width:0%; border-radius:999px; background:linear-gradient(90deg,var(--accent), #4f7bff)}
    .info{padding:14px 16px}
    .h1{font-size:22px; font-weight:800; margin:2px 0 6px}
    .sub{color:var(--muted); font-size:13px}
    .btnrow{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
    .btn{
      padding:9px 14px; border-radius:12px; border:1px solid var(--border);
      background:linear-gradient(180deg,#0f1320,#0d1119); color:var(--text);
      font-weight:600; cursor:pointer; transition:transform .12s ease, border-color .2s;
    }
    .btn:hover{transform:translateY(-1px); border-color:#2b3448}
    .danger{border-color:#3b1012; background:linear-gradient(180deg,#1b0b0c,#12090a); color:#ffbdbd}
    .accent{border-color:#1a2442; background:linear-gradient(180deg,#10162a,#0d1222); color:#c9d9ff}
    .desc{margin-top:14px; color:#c7d0e0}
    .side{display:flex; flex-direction:column; gap:12px}
    .rec{display:flex; gap:10px; padding:10px; border:1px solid var(--border); border-radius:12px; background:linear-gradient(180deg,#0e1219,#0c1016); cursor:pointer; transition:transform .12s ease, border-color .2s ease}
    .rec:hover{transform:translateY(-1px); border-color:#2a3246}
    .rec .rthumb{width:120px; aspect-ratio:16/9; border-radius:10px; background:#0c1220}
    .rec .rinfo{flex:1; min-width:0}
    .rec .rtitle{font-weight:700; font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
    .rec .rtags{margin-top:6px; display:flex; gap:6px; flex-wrap:wrap}
    footer{padding:30px 16px; color:var(--muted); text-align:center}
    @media (max-width: 960px){
      .detail{grid-template-columns:1fr}
      .side{order:3}
      .brand svg{width:32px; height:32px}
      .loading-card{flex-direction:column; align-items:flex-start}
      .loading-thumb{width:100%; height:160px}
    }
  </style>
</head>
<body>
  <header>
    <div class="container toprow">
      <a id="logo" class="brand" href="#" aria-label="Playgrid home" title="Playgrid — Home">
        <svg viewBox="0 0 64 64" role="img" aria-hidden="true" focusable="false">
          <defs>
            <linearGradient id="g1" x1="0" x2="1" y1="0" y2="1">
              <stop offset="0" stop-color="#7aa2ff"/>
              <stop offset="1" stop-color="#7b8bff"/>
            </linearGradient>
          </defs>
          <rect rx="10" width="64" height="64" fill="#0e1321"/>
          <g transform="translate(10,10)">
            <rect width="44" height="44" rx="8" fill="url(#g1)" opacity="0.12"/>
            <path d="M12 8h8a6 6 0 0 1 6 6v4a6 6 0 0 1-6 6h-8z" fill="url(#g1)"/>
            <rect x="26" y="26" width="4" height="4" rx="1" fill="url(#g1)"/>
            <rect x="18" y="26" width="4" height="4" rx="1" fill="url(#g1)"/>
            <rect x="10" y="26" width="4" height="4" rx="1" fill="url(#g1)"/>
          </g>
        </svg>
        <span class="logo-text">
          <span class="title">Playgrid</span>
          <span class="subtitle">HTML5 Games</span>
        </span>
      </a>
      <div style="flex:1; margin-left:16px; display:flex; align-items:center;">
        <div class="search" style="width:100%;">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.471 6.471 0 0 0 1.57-4.23 6.5 6.5 0 1 0-6.5 6.5 6.471 6.471 0 0 0 4.23-1.57l.27.28v.79l5 5 1.5-1.5-5-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
          <input id="q" placeholder="Search games, tags…" />
        </div>
      </div>
    </div>
  </header>
  <main>
    <section id="home">
      <div class="grid">
        <div class="cards" id="cards"></div>
      </div>
    </section>
    <section id="detail" class="hidden">
      <div class="detail">
        <div class="panel">
          <div class="player" id="player"></div>
          <div class="info">
            <div class="h1" id="d-title"></div>
            <div class="sub" id="d-sub"></div>
            <div class="btnrow">
              <button class="btn accent" id="playBtn">Play</button>
              <button class="btn" id="favBtn">Add to Playlist</button>
              <button class="btn danger" id="reportBtn">Report</button>
            </div>
            <div class="tags" id="d-tags" style="margin-top:10px"></div>
            <div class="desc" id="d-desc"></div>
          </div>
        </div>
        <aside class="side" id="recs"></aside>
      </div>
    </section>
  </main>
  <footer>
    <div class="container">© <span id="year"></span> Playgrid · </div>
  </footer>
  <script>
  const GAMES = [
    {
      id:"slope",
      name:"Slope",
      status:"",
      tags:["Arcade","Endless Runner","3D"],
      desc:"Slope is a fast-paced 3D endless runner game where you control a ball rolling down a steep, neon-colored slope. The ball speeds up as you progress, and your goal is to survive as long as possible while avoiding obstacles, sharp turns, and gaps.",
      thumb:"images/slope.png",
      url:"games/slope/index.html",
      video:"videos/slope.mp4"
    },
    {
      id:"astro-miner",
      name:"Astro Miner",
      status:"",
      tags:["Casual","Idle","Clicker"],
      desc:"Mine asteroids, build drones, and optimize routes in space.",
      thumb:"images/astro.png",
      url:"about:blank",
      video:""
    },
    {
      id:"tower-knight",
      name:"Tower Knight",
      status:"",
      tags:["Strategy","Rogue-lite","Defense"],
      desc:"Draft gear, defend waves, and climb procedural towers.",
      thumb:"images/tower.png",
      url:"about:blank",
      video:""
    },
    {
      id:"pixel-fighter",
      name:"Pixel Fighter",
      status:"",
      tags:["Action","Fighting","Local"],
      desc:"Tight hitstop combat with rollback-ready netcode placeholder.",
      thumb:"images/pixel.png",
      url:"about:blank",
      video:""
    },
    {
      id:"island-puzzler",
      name:"Island Puzzler",
      status:"",
      tags:["Puzzle","Cozy","Chill"],
      desc:"Slide islands to connect rivers and discover secrets.",
      thumb:"images/island.png",
      url:"about:blank",
      video:""
    },
    {
      id:"sky-hooks",
      name:"Sky Hooks",
      status:"",
      tags:["Platformer","Speedrun"],
      desc:"Grapple, swing, and chain momentum in the clouds.",
      thumb:"images/sky.png",
      url:"about:blank",
      video:""
    }
  ];
  const $ = s=>document.querySelector(s);
  const $$ = s=>document.querySelectorAll(s);
  function setView(detail=false){
    $('#home').classList.toggle('hidden', detail);
    $('#detail').classList.toggle('hidden', !detail);
  }
  function route(){
    const hash = location.hash.replace(/^#\/?/, '');
    if(hash.startsWith('game/')){
      const id = hash.split('/')[1];
      renderDetail(id);
      setView(true);
    }else{
      setView(false);
      renderCards(filterText.value.trim());
    }
  }
  window.addEventListener('hashchange', route);
  const cardsEl = $('#cards');
  function renderCards(query=""){
    const q = query.toLowerCase();
    cardsEl.innerHTML = '';
    const list = GAMES.filter(g => !q
      || g.name.toLowerCase().includes(q)
      || g.tags.some(t=>t.toLowerCase().includes(q))
    );
    list.forEach(g=>{
      const card = document.createElement('div');
      card.className = 'card ' + outlineClass(g.status);
      const thumbHtml = g.thumb ? `<img src="${escapeHTML(g.thumb)}" alt="${escapeHTML(g.name)}">` : thumbCanvas();
      card.innerHTML = `
        ${badgeHTML(g.status)}
        <div class="thumb">${thumbHtml}</div>
        <div class="overlay"><div class="title">${escapeHTML(g.name)}</div></div>
        <div class="meta">
          <div class="tags">${g.tags.slice(0,3).map(t=>`<span class="tag">${escapeHTML(t)}</span>`).join('')}</div>
        </div>
      `;
      card.addEventListener('click', ()=>location.hash = `#/game/${g.id}`);
      cardsEl.appendChild(card);
    });
  }
  function badgeHTML(status){
    if(status === 'NEW') return `<div class="badge">NEW</div>`;
    if(status === 'POPULAR') return `<div class="badge">POPULAR</div>`;
    return '';
  }
  function outlineClass(status){
    if(status === 'NEW') return 'outline-new';
    if(status === 'POPULAR') return 'outline-popular';
    return '';
  }
  function thumbCanvas(){
    return `<canvas aria-hidden="true"></canvas>`;
  }
  function recommend(game, k=6){
    const set = new Set(game.tags.map(t=>t.toLowerCase()));
    return [...GAMES]
      .map(g=>{
        const score = g.tags.reduce((n,t)=> n + (set.has(t.toLowerCase())?1:0), 0);
        return {g,score};
      })
      .sort((a,b)=>b.score-a.score || a.g.name.localeCompare(b.g.name))
      .slice(0,k+1).map(o=>o.g);
  }
  const filterText = $('#q');
  filterText.addEventListener('keydown', e=>{
    if(e.key==='Enter') renderCards(filterText.value.trim());
  });
  filterText.addEventListener('input', e=> renderCards(filterText.value.trim()));
  $('#logo').addEventListener('click', e=>{
    e.preventDefault();
    location.hash = '';
    renderCards('');
    setView(false);
    filterText.focus();
    filterText.select();
  });
  function escapeHTML(s){return String(s).replace(/[&<>'"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;',"'":'&#39;','"':'&quot;'}[c]))}
  document.getElementById('year').textContent = new Date().getFullYear();
  renderCards();
  route();
  window.setStatus = function(id, status){
    const g = GAMES.find(x=>x.id===id); if(!g) return;
    g.status = status;
    route();
  };
  function renderDetail(id){
  const g = GAMES.find(x=>x.id===id);
  if(!g){ location.hash=''; return; }

  $('#player').innerHTML = `
    ${g.video ? `<video class="bg-video" muted playsinline autoplay loop preload="auto" src="${escapeHTML(g.video)}"></video>` : ''}
    <iframe id="gameFrame" src="" allow="autoplay; fullscreen" style="position:relative; z-index:1; width:100%; height:100%; border:0; display:none"></iframe>
    <div class="loading-overlay" id="loadingOverlay" style="display:flex">
      <div class="loading-card">
        <div class="loading-thumb">${g.thumb ? `<img src="${escapeHTML(g.thumb)}" alt="${escapeHTML(g.name)}">` : ''}</div>
        <div class="loading-meta">
          <div class="loading-title">${escapeHTML(g.name)}</div>
          <div class="progress-wrap" style="margin-bottom:8px">
            <div class="progress" id="progressBar" style="width:0%"></div>
          </div>
          <div style="font-size:12px;color:var(--muted)">Preparing game…</div>
        </div>
      </div>
    </div>
  `;

  $('#d-title').textContent = g.name;
  $('#d-sub').textContent = `${g.tags.join(' · ')}`;
  $('#d-tags').innerHTML = g.tags.map(t=>`<span class="tag">${escapeHTML(t)}</span>`).join('');
  $('#d-desc').textContent = g.desc;
  $('#playBtn').onclick = ()=>{ startLoadingAndPlay(g); };

  const recs = recommend(g, 6).filter(x=>x.id!==g.id);
  const recsEl = $('#recs');
  recsEl.innerHTML = '';
  recs.forEach(r=>{
    const el = document.createElement('div');
    el.className = 'rec';
    el.innerHTML = `
      <div class="rthumb ${outlineClass(r.status)}" style="border:1px solid var(--border); background-image:url('${escapeHTML(r.thumb || '')}'); background-size:cover; background-position:center"></div>
      <div class="rinfo">
        <div class="rtitle">${escapeHTML(r.name)}</div>
        <div class="rtags">${r.tags.slice(0,3).map(t=>`<span class="tag">${escapeHTML(t)}</span>`).join('')}</div>
      </div>`;
    el.addEventListener('click', ()=>location.hash = `#/game/${r.id}`);
    recsEl.appendChild(el);
  });
}

function startLoadingAndPlay(game){
  const overlay = $('#loadingOverlay');
  const progress = $('#progressBar');
  const frame = $('#gameFrame');
  if(!overlay || !progress || !frame) return;

  overlay.style.display = 'flex';
  frame.style.display = 'none';

  let p = 0;
  const step = ()=>{
    if(p>=100){ finish(); return; }
    p += Math.max(3, Math.random()*10);
    if(p>99) p = 100;
    progress.style.width = p + '%';
    setTimeout(step, 40);
  };

  const finish = ()=>{
    progress.style.width = '100%';
    setTimeout(()=>{
      if(game.url && game.url!=='about:blank'){
        frame.src = game.url;
        frame.style.display = 'block';
      }
      overlay.style.display = 'none';
    }, 350);
  };
  step();
}


  </script>
</body>
</html>
